<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitBros</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1>FitBros</h1>
            <div class="profile-selector">
                <select id="profileSelect">
                    <option value="user1">Adarsh</option>
                    <option value="user2">Aryan</option>
                </select>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard View -->
            <section id="dashboard" class="view active">
                <div class="date-header">
                    <button id="prevDay" class="date-nav">&lt;</button>
                    <h2 id="currentDate">Today</h2>
                    <button id="nextDay" class="date-nav">&gt;</button>
                </div>

                <div class="summary-cards">
                    <div class="card calories-card">
                        <h3>Calories</h3>
                        <div class="progress-ring">
                            <svg viewBox="0 0 100 100">
                                <circle class="progress-bg" cx="50" cy="50" r="45"></circle>
                                <circle class="progress-bar" id="calorieRing" cx="50" cy="50" r="45"></circle>
                            </svg>
                            <div class="progress-text">
                                <span id="caloriesConsumed">0</span>
                                <small>/ <span id="calorieGoal">2000</span></small>
                            </div>
                        </div>
                    </div>

                    <div class="card macros-card">
                        <h3>Macros</h3>
                        <div class="macro-bars">
                            <div class="macro-item">
                                <span class="macro-label">Protein</span>
                                <div class="macro-bar-container">
                                    <div class="macro-bar protein" id="proteinBar"></div>
                                </div>
                                <span class="macro-value"><span id="proteinValue">0</span>g</span>
                            </div>
                            <div class="macro-item">
                                <span class="macro-label">Carbs</span>
                                <div class="macro-bar-container">
                                    <div class="macro-bar carbs" id="carbsBar"></div>
                                </div>
                                <span class="macro-value"><span id="carbsValue">0</span>g</span>
                            </div>
                            <div class="macro-item">
                                <span class="macro-label">Fat</span>
                                <div class="macro-bar-container">
                                    <div class="macro-bar fat" id="fatBar"></div>
                                </div>
                                <span class="macro-value"><span id="fatValue">0</span>g</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card today-meals">
                    <div class="card-header">
                        <h3>Today's Meals</h3>
                        <button class="btn-add" onclick="App.showView('nutrition')">+ Add</button>
                    </div>
                    <div id="todayMealsList" class="meals-list">
                        <p class="empty-state">No meals logged yet</p>
                    </div>
                </div>

                <div class="card workout-schedule-card">
                    <h3>Workout Schedule</h3>
                    <div id="weekSchedule" class="week-schedule"></div>
                </div>

                <div class="card today-workout">
                    <div class="card-header">
                        <h3>Today's Workout</h3>
                        <button class="btn-add" onclick="App.showView('workout')">+ Add</button>
                    </div>
                    <div id="todaysPlan" class="todays-plan"></div>
                    <div id="todayWorkoutList" class="workout-list">
                        <p class="empty-state">No workout logged yet</p>
                    </div>
                </div>
            </section>

            <!-- Nutrition View -->
            <section id="nutrition" class="view">
                <h2>Log Meal</h2>

                <div class="meal-type-tabs">
                    <button class="meal-tab active" data-meal="breakfast">Breakfast</button>
                    <button class="meal-tab" data-meal="lunch">Lunch</button>
                    <button class="meal-tab" data-meal="dinner">Dinner</button>
                    <button class="meal-tab" data-meal="snacks">Snacks</button>
                </div>

                <div class="search-container">
                    <input type="text" id="foodSearch" placeholder="Search food..." class="search-input">
                    <button class="btn-custom" onclick="Nutrition.showCustomFoodForm()">+ Custom</button>
                </div>

                <div class="category-filter">
                    <select id="categoryFilter">
                        <option value="">All Categories</option>
                    </select>
                </div>

                <div id="foodList" class="food-list"></div>

                <!-- Custom Food Modal -->
                <div id="customFoodModal" class="modal">
                    <div class="modal-content">
                        <h3>Add Custom Food</h3>
                        <form id="customFoodForm">
                            <input type="text" id="customName" placeholder="Food name" required>
                            <input type="number" id="customCalories" placeholder="Calories" required>
                            <input type="number" id="customProtein" placeholder="Protein (g)" required>
                            <input type="number" id="customCarbs" placeholder="Carbs (g)" required>
                            <input type="number" id="customFat" placeholder="Fat (g)" required>
                            <input type="text" id="customServing" placeholder="Serving size" required>
                            <div class="modal-buttons">
                                <button type="button" onclick="Nutrition.hideCustomFoodForm()">Cancel</button>
                                <button type="submit">Add</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Quantity Modal -->
                <div id="quantityModal" class="modal">
                    <div class="modal-content">
                        <h3 id="quantityFoodName">Food Name</h3>
                        <p id="quantityFoodInfo"></p>
                        <div class="quantity-input">
                            <label>Servings:</label>
                            <input type="number" id="servingQuantity" value="1" min="0.25" step="0.25">
                        </div>
                        <div class="quantity-preview">
                            <p>Calories: <span id="previewCalories">0</span></p>
                            <p>Protein: <span id="previewProtein">0</span>g | Carbs: <span id="previewCarbs">0</span>g | Fat: <span id="previewFat">0</span>g</p>
                        </div>
                        <div class="modal-buttons">
                            <button type="button" onclick="Nutrition.hideQuantityModal()">Cancel</button>
                            <button type="button" onclick="Nutrition.confirmAddFood()">Add to Log</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Workout View -->
            <section id="workout" class="view">
                <h2>Log Workout</h2>

                <div class="workout-form card">
                    <div class="exercise-select">
                        <select id="muscleGroup">
                            <option value="">Select Muscle Group</option>
                            <option value="chest">Chest</option>
                            <option value="back">Back</option>
                            <option value="shoulders">Shoulders</option>
                            <option value="arms">Arms</option>
                            <option value="legs">Legs</option>
                            <option value="core">Core</option>
                        </select>
                        <select id="exerciseSelect" disabled>
                            <option value="">Select Exercise</option>
                        </select>
                    </div>

                    <div id="setsContainer" class="sets-container">
                        <!-- Sets will be added here -->
                    </div>

                    <button class="btn-secondary" onclick="Workout.addSet()">+ Add Set</button>
                    <button class="btn-primary" onclick="Workout.saveExercise()">Save Exercise</button>
                </div>

                <div class="card">
                    <h3>Today's Exercises</h3>
                    <div id="exercisesList" class="exercises-list">
                        <p class="empty-state">No exercises logged yet</p>
                    </div>
                </div>

                <div class="card">
                    <h3>Personal Records</h3>
                    <div id="prList" class="pr-list">
                        <p class="empty-state">Complete workouts to see PRs</p>
                    </div>
                </div>
            </section>

            <!-- Progress View -->
            <section id="progress" class="view">
                <h2>Progress</h2>

                <div class="time-filter">
                    <button class="time-btn active" data-days="7">7 Days</button>
                    <button class="time-btn" data-days="30">30 Days</button>
                    <button class="time-btn" data-days="90">90 Days</button>
                </div>

                <div class="card">
                    <h3>Calorie Trend</h3>
                    <canvas id="calorieChart"></canvas>
                </div>

                <div class="card">
                    <h3>Macro Distribution</h3>
                    <canvas id="macroChart"></canvas>
                </div>

                <div class="card">
                    <h3>Workout Frequency</h3>
                    <canvas id="workoutChart"></canvas>
                </div>

                <div class="card">
                    <h3>Strength Progress</h3>
                    <select id="exerciseProgressSelect">
                        <option value="">Select Exercise</option>
                    </select>
                    <canvas id="strengthChart"></canvas>
                </div>
            </section>

            <!-- Settings View -->
            <section id="settings" class="view">
                <h2>Settings</h2>

                <div class="card">
                    <h3>Profile</h3>
                    <div class="setting-item">
                        <label>Profile Name</label>
                        <input type="text" id="profileName" placeholder="Your name">
                    </div>
                    <div class="setting-item">
                        <label>Body Weight (kg)</label>
                        <input type="number" id="bodyWeight" placeholder="70">
                    </div>
                </div>

                <div class="card">
                    <h3>Daily Goals</h3>
                    <div class="setting-item">
                        <label>Calorie Goal</label>
                        <input type="number" id="settingCalorieGoal" placeholder="2000">
                    </div>
                    <div class="setting-item">
                        <label>Protein Goal (g)</label>
                        <input type="number" id="settingProteinGoal" placeholder="120">
                    </div>
                    <div class="setting-item">
                        <label>Carbs Goal (g)</label>
                        <input type="number" id="settingCarbsGoal" placeholder="250">
                    </div>
                    <div class="setting-item">
                        <label>Fat Goal (g)</label>
                        <input type="number" id="settingFatGoal" placeholder="65">
                    </div>
                    <button class="btn-primary" onclick="Settings.saveSettings()">Save Goals</button>
                </div>

                <div class="card">
                    <h3>Data Management</h3>
                    <button class="btn-secondary" onclick="Settings.exportData()">Export Data</button>
                    <button class="btn-secondary" onclick="document.getElementById('importFile').click()">Import Data</button>
                    <input type="file" id="importFile" accept=".json" style="display:none" onchange="Settings.importData(event)">
                    <button class="btn-danger" onclick="Settings.clearData()">Clear All Data</button>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="dashboard">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">Home</span>
            </button>
            <button class="nav-item" data-view="nutrition">
                <span class="nav-icon">üçΩÔ∏è</span>
                <span class="nav-label">Food</span>
            </button>
            <button class="nav-item" data-view="workout">
                <span class="nav-icon">üí™</span>
                <span class="nav-label">Workout</span>
            </button>
            <button class="nav-item" data-view="progress">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">Progress</span>
            </button>
            <button class="nav-item" data-view="settings">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-label">Settings</span>
            </button>
        </nav>

        <!-- Backup Reminder Modal -->
        <div id="backupReminderModal" class="modal">
            <div class="modal-content backup-modal">
                <div class="backup-icon">üíæ</div>
                <h3>Time to Backup!</h3>
                <p>It's been <strong><span id="daysSinceBackup">7</span> days</strong> since your last backup.</p>
                <p class="backup-warning">Export your data regularly to avoid losing your progress if browser data is cleared.</p>
                <div class="modal-buttons">
                    <button type="button" onclick="App.skipBackup()">Remind Later</button>
                    <button type="button" onclick="App.backupNow()">Backup Now</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/storage.js"></script>
    <script src="js/food-db.js"></script>
    <script src="js/nutrition.js"></script>
    <script src="js/workout.js"></script>
    <script src="js/progress.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
